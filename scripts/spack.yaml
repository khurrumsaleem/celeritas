spack:
  specs:
  # Packages required for a *truly minimal* build
  - cli11
  - cmake
  - nlohmann-json
  # ... plus packages required for *basic* realistic development
  - geant4@11.3
  - git
  - googletest
  - py-pre-commit
  - python
  # ... plus *recommended* options
  - covfie
  - g4vg
  - hepmc3
  - ninja
  - vecgeom@1
  # Uncomment the following lines for additional supported optional packages
#   - root
#   # documentation
#   - doxygen
#   - py-breathe
#   - py-furo
#   - py-sphinx
#   - py-sphinxcontrib-bibtex
#   # experimental
#   - dd4hep
#   - mpi
#   # R&D repositories
#   - git-lfs
  view: true
  concretizer:
    unify: true
  # These encode version and variant requirements for packages used by Celeritas.
  # Update this file when modifying the top-level CMakeLists.txt.
  packages:
    all:
      prefer:
      - "generator=ninja build_system=cmake"
      - "build_type=Release"
      - "cxxstd=20"
      # Note: for CUDA support run this command in your environment:
      # spack config add packages:all:prefer:"+cuda cuda_arch=<ARCH>"
    cli11:
      require: '@2.4:'
    cmake:
      require: '@3.18:'
    nlohmann-json:
      require: '@3.7.0:'
    geant4:
      require: '@10.5:'
    googletest:
      require: '@1.10:'
    py-identify: # needed by py-pre-commit
      require: '@2.6:'
    python:
      require: '@3.9:'
    covfie:
      require: '@0.13:'
    g4vg:
      require: '@1.0.3:'
    vecgeom:
      require:
      - '@1.2.10:'
      - +gdml
    root:
      require:
      - '@6.28:'
      variants:
      # Prefer building without GUI and with ROOT 7 support if available
      - ~aqua ~davix ~examples ~opengl ~x ~tbb ~webgui +root7
    dd4hep:
      require:
      - '@1.18:'
      - ~utilityapps ~ddeve
